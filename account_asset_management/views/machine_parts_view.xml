<odoo>

    <record id="machine_parts_kanban_view" model="ir.ui.view">
        <field name="name">machine.parts.kanban.kanban</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="id"/>
                <field name="product_variant_count"/>
                <field name="currency_id"/>
                <field name="activity_state"/>
                <field name="qty_available_parts"/>
                <field name="uom_id"/>
                <field name="standard_price"/>
                <field name="type"/>
                <progressbar field="activity_state"
                             colors='{"planned": "success", "today": "warning", "overdue": "danger"}'/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('product.template', 'image_128', record.id.raw_value)"
                                     alt="Product" class="o_image_64_contain"/>
                            </div>
                            <div class="oe_kanban_details">
<!--                                <strong class="o_kanban_record_title">-->
<!--                                    <field name="name"/>-->
<!--                                    <small t-if="record.default_code.value">[<field name="default_code"/>]-->
<!--                                    </small>-->
<!--                                </strong>-->
                                <div t-if="record.product_variant_count.value &gt; 1"
                                     groups="product.group_product_variant">
                                    <strong>
                                        <t t-esc="record.product_variant_count.value"/>
                                        Variants
                                    </strong>
                                </div>
                                <div name="tags"/>
                                <ul>
                                    <li>Price:
                                        <field name="lst_price" widget="monetary"
                                               options="{'currency_field': 'currency_id', 'field_digits': True}"></field>
                                    </li>
                                    <li t-if="record.type.raw_value == 'product'">On Hand:
                                        <field name="qty_available_parts"/>
                                        <field name="uom_id"/>
                                    </li>
                                    <li>Cost:
                                        <field name="standard_price" widget="monetary"
                                               options="{'currency_field': 'currency_id', 'field_digits': True}"/>
                                    </li>
                                </ul>
                                <div name="tags"/>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="machine_parts_form_view" model="ir.ui.view">
        <field name="name">machine.parts.form.view</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <form>
                <style>
                    select.o_field_widget.o_input {
                    padding: 7px;
                    }
                    .o_form_view .o_form_statusbar > .o_field_widget {
                    align-self: center;
                    margin-bottom: 0px;
                    width: min-content;
                    }
                    .o_form_view .o_group {
                    display: inline-block;
                    width: 100%;
                    margin: 1px 0;
                    }
                    .o_notification_manager {
                    left: 40%;
                    }
                    body {

                    line-height: 2 !important;
                    }
                    .text-warning {
                    color: #ffffff !important;
                    }
                    .text-warning {
                    color: #ffffff !important;
                    }
                    overflow-y: hidden;
                    height: 35px !important;
                    resize: none;
                    }
                    .table {
                    width: 95%!important;
                    }


                    /*btn*/
                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_stat_info .o_stat_value, .o_form_view
                    .oe_button_box .btn.oe_stat_button > span .o_stat_value {
                    font-weight: 700;
                    color: #f2f2f2 !important;
                    line-height: 1.2;
                    font-size: 13px !important;
                    text-align: center !important;
                    }
                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_stat_info .o_stat_value, .o_form_view
                    .oe_button_box .btn.oe_stat_button > span .o_stat_value {
                    font-weight: 700;
                    color: #f2f2f2;
                    line-height: 1.2;
                    font-size: 15px;
                    text-align: center !important;
                    }
                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_stat_info .o_stat_text, .o_form_view
                    .oe_button_box .btn.oe_stat_button > span .o_stat_text {
                    line-height: 1.2;
                    text-align: center !important;
                    }
                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_stat_info, .o_form_view .oe_button_box
                    .btn.oe_stat_button > span {
                    display: inline-block;
                    vertical-align: middle;
                    font-weight: 500;
                    max-width: 100% !important;
                    padding-right: 0px !important;
                    line-height: 1.3;
                    width: 100% !important;
                    }
                    .o_form_view .oe_button_box .btn.oe_stat_button {
                    color: #f2f2f2;
                    height: 44px;
                    padding: 0 0px 0 0 !important;
                    text-align: left;
                    white-space: nowrap;
                    background-color: transparent;
                    opacity: 1 !important;
                    border-radius: 0px;
                    margin-bottom: 0;
                    }

                    .btn.oe_stat_button {
                    background-color: #0b5d74 !important;
                    }

                    .o_form_view .oe_button_box .btn.oe_stat_button {
                    color: #FFF;
                    }

                    .o_stat_text:hover {
                    color: #eae6e6 !important;
                    }

                    .btn.oe_stat_button:hover {
                    color: #eceaea !important;
                    }

                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_stat_info .o_stat_value, .o_form_view
                    .oe_button_box .btn.oe_stat_button > span .o_stat_value {
                    color: #fff !important;
                    }

                    .oe_button_box .fa {
                    color: #fff !important;
                    }

                    .o_field_widget.o_field_many2one {
                    width: 100%;
                    }

                    .col-4 {
                    min-height: 50px;
                    }
                    .o_form_view .oe_button_box .btn.oe_stat_button > .o_button_icon {
                    width: 22% !important;
                    }

                    textarea {
                    padding-left: 10px !important;
                    padding-top: 2px !important;
                    }

                    .kanban_image .o_x2m_control_panel .o_cp_buttons .o-kanban-button-new {
                    margin-left: 0px;
                    margin-bottom: 8px;
                    padding: 5px 23px !important;
                    }

                    .kanban_image .oe_kanban_global_click.p-0.o_kanban_record {
                    margin-left: 0 !important;
                    }

                    .radio_button .o_field_radio.o_vertical.o_field_widget.w-100 {
                    display: flex !important;
                    flex-direction: row !important;
                    flex-wrap: nowrap !important;
                    }

                    .radio_button .custom-control.custom-radio.o_radio_item {
                    width: 20% !important;
                    }
                </style>
                <sheet>
                    <field name='product_variant_count' invisible='1'/>
                    <field name='is_product_variant' invisible='1'/>
                    <field name='attribute_line_ids' invisible='1'/>
                    <field name="id" invisible="True"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                    <field name="cost_currency_id" invisible="1"/>
                    <field name="product_variant_id" invisible="1"/>
                    <group name="email_template_and_project" invisible="1"/>
                    <div name="button_box" class="oe_button_box button_space"
                         attrs="{'invisible':[('id', '=', False)]}">
                        <button type="object" invisible="1"
                                name="action_open_quants"
                                attrs="{'invisible':[('type', '!=', 'product')]}"
                                class="oe_stat_button btn">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value" widget="statinfo">
                                    <i
                                            class="fa fa-fw o_button_icon fa-cubes"></i>
                                    <field name="qty_available" widget="statinfo" nolabel="1"/>
                                    <field name="uom_name"/>
                                </span>
                                <span class="o_stat_text">On Hand</span>
                            </div>
                        </button>
                        <button type="object"
                                name="action_open_quants"
                                attrs="{'invisible':[('type', '!=', 'product')]}"
                                class="oe_stat_button btn">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value" widget="statinfo">
                                    <i class="fa fa-fw o_button_icon fa-cubes"></i>
                                    <field name="qty_available_parts" widget="statinfo" nolabel="1"/>
                                    <field name="uom_name"/>
                                </span>
                                <span class="o_stat_text">On Hand</span>
                            </div>
                        </button>
                        <button type="object"
                                name="action_product_tmpl_forecast_report"
                                attrs="{'invisible':[('type', '!=', 'product')]}"
                                context="{'default_product_tmpl_id': id}"
                                class="oe_stat_button">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <i class="fa fa-fw o_button_icon fa-cubes"></i>
                                    <field name="virtual_available" widget="statinfo" nolabel="1"/>
                                    <field name="uom_name"/>
                                </span>
                                <span class="o_stat_text">Forecasted</span>
                            </div>
                        </button>
                        <button type="object"
                                name="action_view_stock_move_lines"
                                attrs="{'invisible':[('type', 'not in', ['product', 'consu'])]}"
                                class="oe_stat_button"
                                groups="stock.group_stock_user">
                            <div class="o_form_field o_stat_info" style="width: 100% !important">
                                <span class="o_stat_value">
                                    <i class="fa fa-fw o_button_icon fa-exchange"></i>
                                </span>
                                <span class="o_stat_text">Traceability</span>
                            </div>
                        </button>
                        <button type="object" name="action_view_orderpoints_parts"
                                context='{"machine_parts": 1,"default_is_parts_reorder":True}'
                                attrs="{'invisible':['|',('type', '!=', 'product'), ('averigo_reordering_rules', '!=', 1)]}"
                                class="oe_stat_button">
                            <div class="o_field_widget o_stat_info">
                                <i class="fa fa-fw o_button_icon fa-refresh"></i>
                                <span class="o_stat_text">Min:</span>
                                <span class="o_stat_text">Max:</span>
                            </div>
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="averigo_reordering_min_qty"/>
                                </span>
                                <span class="o_stat_value">
                                    <field name="averigo_reordering_max_qty"/>
                                </span>
                            </div>
                        </button>
                        <button type="object" name="action_view_orderpoints_parts"
                                context='{"machine_parts": 1, "default_is_parts_reorder":True}'
                                attrs="{'invisible':['|',('type', '!=', 'product'), ('averigo_reordering_rules', '==', 1)]}"
                                class="oe_stat_button">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <i class="fa fa-fw o_button_icon fa-refresh"></i>
                                    <field name="averigo_reordering_rules" widget="statinfo" nolabel="1"/>
                                </span>
                                <span class="o_stat_text">Reordering Rules</span>
                            </div>
                        </button>
                        <button string="Lot/Serial Numbers" type="object" invisible="1"
                                name="action_open_product_lot"
                                attrs="{'invisible': [('tracking', '=', 'none')]}"
                                class="oe_stat_button" icon="fa-bars" groups="stock.group_production_lot"/>
                        <button type="object"
                                name="action_view_related_putaway_rules"
                                class="oe_stat_button" groups="stock.group_stock_multi_locations"
                                attrs="{'invisible': [('type', '=', 'service')]}"
                                context="{'invisible_handle': True,'single_product': product_variant_count == 1,}">
                            <div class="o_form_field o_stat_info" style="width: 100% !important">
                                <span class="o_stat_value">
                                    <i class="fa fa-fw o_button_icon fa-random"></i>
                                </span>
                                <span class="o_stat_text">Putaway Rules</span>
                            </div>
                        </button>
                    </div>
                    <field name="tracking" widget="radio"
                           attrs="{'invisible': [('type', 'in', ['service', 'digital'])]}" invisible='1'/>
                    <field name='product_variant_count' invisible='1'/>
                    <field name='is_product_variant' invisible='1'/>
                    <field name='attribute_line_ids' invisible='1'/>
                    <div class="oe_button_box" name="button_box"/>
                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger"
                            attrs="{'invisible': [('active', '=', True)]}"/>
                    <field name="id" invisible="1"/>
                    <div class="row field_color pt-2">
                        <field name="active" invisible="1"/>
                        <field name="type" invisible="1"/>
                        <field name="subsidy_check" invisible="1"/>
                        <field name="fuel_check" invisible="1"/>
                        <field name="hazard_check" invisible="1"/>
                        <field name="operator_id" invisible="1"/>
                        <field name="list_price" invisible="1"/>
                        <field name="uom_po_id" invisible="1"/>
                        <field name="res_location" invisible="1"
                               domain="[('company_id', '=', operator_id),('location_type', '=', 'view')]"/>
                        <field name="primary_locations" invisible="1"/>
                        <field name="primary_location" invisible="1"
                               attrs="{'invisible': [('type', '=', 'service')], 'required': [('type', '!=', 'service')]}"
                               domain="[('id', 'in', primary_locations)]"
                               context="{'form_view_ref' : 'micro_market.bin_location_form'}"
                               options='{"no_create": True, "no_open": True}'/>
                        <field name="enable_product_code" invisible="1"/>
                        <field name="upc_code" invisible="1"/>
                        <div class="col-9"/>
                        <div class="col-3">
                            <field name="image_1920" widget="image" class="oe_avatar"
                                   options="{'preview_image': 'image_128'}"/>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="name" string="Parts Name" class="w-100"/>
                            <field name="name" placeholder="Parts Name" class="oe_edit_only w-100"/>
                            <field name="name" placeholder="Parts Name" class="oe_read_only name_font w-100"/>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="product_type" string="Parts Type" class="w-100"/>
                            <field name="product_type" class="w-100"
                                   attrs="{'readonly': ['|', '|', ('hazard_check', '=', True), ('fuel_check', '=', True), ('subsidy_check', '=', True)]}"/>
                        </div>
                        <div class="col-4 pt-2" attrs="{'invisible': [('enable_product_code', '=', False)]}">
                            <label for="default_code" string="Parts Code" class="w-100"/>
                            <field name="default_code" class="w-100" readonly="1"/>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="categ_id" string="Parts Category" class="w-100"/>
                            <field name="categ_id" class="w-100"/>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="uom_id" string="Unit of Measure" class="w-100"/>
                            <field name="uom_id" class="w-100"/>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="tax_status" string="Taxable Status" class="w-100"/>
                            <field name="tax_status" widget="radio" options="{'horizontal': True}"/>
                        </div>
                    </div>
                    <div class="row field_color">
                        <div class="col-12 col-header">
                            <h3 style="margin:0px">Sales</h3>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="list_price" string="Sales Price" class="w-100"/>
                            <field name="list_price" class="w-100"/>
                        </div>
                    </div>
                    <div class="row field_color">
                        <div class="col-12 col-header">
                            <h3 style="margin:0px">Purchase</h3>
                        </div>
                        <div class="col-4 pt-2"
                             attrs="{'invisible': [('product_variant_count', '&gt;', 1), ('is_product_variant', '=', False)]}">
                            <label for="standard_price" string="Cost" class="w-100" groups="base.group_user"/>
                            <div name="standard_price_uom" groups="base.group_user" class="o_row">
                                <field name="cost_method" invisible="1" readonly="1"/>
                                <field name="standard_price" widget='monetary' readonly="1" class="w-100"
                                       options="{'currency_field': 'cost_currency_id'}"/>
                                <span groups="uom.group_uom" class="oe_read_only" style="color:#3d9bbb">Per
                                    <field name="uom_name"/>
                                </span>
                                <span name="update_cost_price">
                                    <button string="Update Cost" type="action"
                                            name="%(stock_account.action_view_change_standard_price)d"
                                            attrs="{'invisible':['|', ('cost_method', '=', 'fifo'), ('product_variant_count', '>', 1)]}"
                                            class="o_form_button_edit oe_inline"/>
                                </span>
                            </div>
                        </div>
                        <div class="col-4 pt-2">
                            <label for="res_partner" string="Preferred Vendor" class="w-100"/>
                            <field name="res_partner" class="w-100"
                                   domain="[('is_vendor', '=', True), ('vendor_approve', '=', True), ('type', '=', 'contact'), ('parent_id', '=', False)]"
                                   context="{'form_view_ref' : 'averigo_purchase.view_res_vendors_form','search_default_supplier': 1,'res_partner_search_mode': 'supplier',
                                                'default_is_company': True, 'default_supplier_rank': 1 , 'default_company_id':company_id, 'default_is_vendor':True}"/>
                        </div>
                    </div>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="machine_parts_tree_view" model="ir.ui.view">
        <field name="name">machine.parts.tree.view</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <tree string="Equipment Parts">
                <field name="name"/>
            </tree>
        </field>
    </record>

    <record id="action_machine_parts" model="ir.actions.act_window">
        <field name="name">Equipment Parts</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_is_machine_part': True, 'default_averigo_purchase': True}</field>
        <field name="domain">[('is_machine_part', '=', True)]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
                Create New Equipment Part
            </p>
        </field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('product.product_template_kanban_view')}),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('machine_parts_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('machine_parts_form_view')})]"/>
    </record>

</odoo>